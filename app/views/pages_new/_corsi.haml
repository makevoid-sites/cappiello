
.line.bg-muted
  .separator50#corsi
  .line-compress.line-max
    .separator50
    %h1.line.color-muted.center-content.article-title.font-custom
      I Corsi
    .separator30
    .separator15.pattern
    .separator30
    .line.article
      :ruby
        # raise NuPage.all.inspect
        # pages = NuPage.all_saf
        pages = NuPage.all_saf_filtered

        corsi = []
        pages.each do |page|
          desc_small = page.meta_description_it
          desc_small = truncate desc_small, 280

          corsi << { # TODO: translation
            name:       page.title_it,
            desc_small: desc_small,
            title_url:  page.title_url_it,
          }
        end

      :css
        .widget > img {
          width: 100%
        }

      - corsi.each_with_index do |corso, idx|
        .widget.bg-white
          .widget-pic{:style => "background: url(/images/corsi/#{corso[:title_url]}.jpg) no-repeat center center; background-size:cover;"}
          -# %iframe{:allowfullscreen => "", :frameborder => "0", :src => "https://www.youtube.com/embed/KICyR3BZWwE", :width => "100%"}
          .separator15
          .line-compress
            .line-compress
              %h3
                =# corso[:title_url] #debug
                = corso[:name]
              .separator5
              .widget-desc
                %h6= corso[:desc_small]
              .separator10
              .line
                .col7.line-tablet
                .col3.line-tablet
                  %a.btn.bg-primary.center-content.line-tablet.color-white.push-right.toggle-opacity-inverse-hover{:href => "/c/#{corso[:title_url]}"}
                    Informazioni
          .separator15
        - if idx % 3 == 2
          .separator30
  .separator50
  .separator30
